---
title: "CodeBook.md"
author: "Jen Sern LEW"
date: "Sunday, May 24, 2015"
output: html_document
---

#CODEBOOK for run_analysis.R
Information on Data Transformation Steps and Variable Names

Table Variable Name                     Description     
------------------                      ------------ 
ActivityCode                            Values 1-6 corresponding to activity_labels
ActivityName                            Activity name corresponding to activity_labels (LAYING, SITTING, STANDING, WALKING, WALKING_DOWNSTAIRS, WALKING_UPSTAIRS)
SubjectID                               ID of subject (1-30) of the 30 volunteers participating in study
Features(cols 561-564)                  **Refer to feature appendix**
Inertial Signals(cols 565-1716)         **Refer to inertial_names convention in R Variable** table.



R Variable Name                 Description     
-------------                   ------ 
x_test                          data table from "test/x_test.txt"
x_train                         data table from "train/x_train.txt"
feature_list                    list of 561 features from "features.txt"
subj_list                       list of observations by subject ID (values range from 1-30) from "test/subject_test.txt", reused for "train/subject_train.txt"
activity_code                   list of observations by activity Code (values range from 1-6) from "test/y_test.txt", reused for "train_y_train.txt"
activity_label                  data table from "activity_labels.txt" providing a mapping from activity code(values 1-6) to activity names-*"WALKING","WALKING_UPSTAIRS","WALKING_DOWNSTAIRS","SITTING","STANDING","LAYING"*)
activity_match                  data frame obtained from matching observations to the activity code
activity_list                   data frame containing activity names generated by subsetting activity_label with actvity_match
inertial_tot_acc_x              inertial signal data for total acceleration in the x-axis from "test", reused for both the "Test" and "Train" dataset manipulation
inertial_tot_acc_y              inertial signal data for total acceleration in the y-axis from "test", reused for both the "Test" and "Train" dataset manipulation
inertial_tot_acc_z              inertial signal data for total acceleration in the z-axis from "test", reused for both the "Test" and "Train" dataset manipulation
inertial_bod_acc_x              inertial signal data for body acceleration in the x-axis from "test", reused for both the "Test" and "Train" dataset manipulation
inertial_bod_acc_y              inertial signal data for body acceleration in the y-axis from "test", reused for both the "Test" and "Train" dataset manipulation
inertial_bod_acc_z              inertial signal data for body acceleration in the z-axis from "test", reused for both the "Test" and "Train" dataset manipulation
inertial_gyro_rad_x             inertial signal data for gyroscope angular velocity in the x-axis from "test", reused for both the "Test" and "Train" dataset manipulation
inertial_gyro_rad_y             inertial signal data for gyroscope angular velocity in the y-axis from "test", reused for both the "Test" and "Train" dataset manipulation
inertial_gyro_rad_z             inertial signal data for gyroscope angular velocity in the z-axis from "test", reused for both the "Test" and "Train" dataset manipulation
tidydata_test                   tidy data frame combining the following columns (activity_code, activity_list, x_test, inertial_tot_acc_x, inertial_tot_acc_y, inertial_tot_acc_z, inertial_bod_acc_x, inertial_bod_acc_y, inertial_bod_acc_z, inertial_gyro_rad_x, inertial_gyro_rad_y, inertial_gyro_rad_z)
tidydata_train                  tidy data frame combining the following columns (activity_code, activity_list, x_train, inertial_tot_acc_x, inertial_tot_acc_y, inertial_tot_acc_z, inertial_bod_acc_x, inertial_bod_acc_y, inertial_bod_acc_z, inertial_gyro_rad_x, inertial_gyro_rad_y, inertial_gyro_rad_z)
feature_names                   list containing names of the features measured
inertial_names                  list containing names for the inertial signals according to the convention tot.acc.x.1, body.acc.x.1, gyro.rad.x.1 for x/y/z and for observations in time from 1-128 data points per window. Total acceleration and body acceleration is in units of gravity "g", gyroscope angular velocity in radians/second
col_names                       list containing all column names to be applied to full data frame
tidydata_full                   data frame containing complete data value for test and train datasets including inertial signals
mean_grep_list                  list of rows for column names containing "mean"
mean_grep_name                  list of names for the matched rows containing "mean"
std_grep_list                   list of rows for column names containing "std"
std_grep_name                   list of names for the matched rows containing "std"
activity_grep_list              list of rows for column names containing "activity"
activity_grep_name              list of names for the matched rows containing "activity"        
subject_grep_list               list of rows for column names containing "subject"
subject_grep_name               list of names for the matched rows containing "subject"
selected_features_list          list of rows for column names containing both "mean" and "std"
tidydata_select                 data frame subsetted to contain only "mean" and "std" features
tidy_activity                   data frame split by activity name
name_list                       list of names for all subjects
**ActivityMeanExtractor()**     function that accepts argument from 1:6 corresponding to the activity type, computes average values for all "mean" and "std" for each person/subjectID, and adds a column containing matching activity name based on input argument, and finally returns a data frame organized by input argument
tidy_activity_person            variable defined in **ActivityMeanExtractor()** containing average values for all "mean" and "std" for each person/subjectID
activity_split_list             list containing activity names according to the split order
tidy_ActivityName               obtain activity name based on function argument to be duplicated across each person/subjectID  
tidy_activity_person_df         data frame generated by conversion of features into vector rows for each person and re-generate into data frame
tidy_SubjectID                  list containing subjectID  
tidy_activity_person_df2        data frame containing columns "ActivityName","SubjectID",features containing "mean" and "std"
tidydata_avg_mean_std           data frame containing all subjectID/person averages for each activity type, 30 subjects for each of 6 activities giving 180 rows of average values across 79 measured features of "mean" and "std"


##Feature Appendix

The features selected for this database come from the accelerometer and gyroscope 3-axial raw signals tAcc-XYZ and tGyro-XYZ. These time domain signals (prefix 't' to denote time) were captured at a constant rate of 50 Hz. Then they were filtered using a median filter and a 3rd order low pass Butterworth filter with a corner frequency of 20 Hz to remove noise. Similarly, the acceleration signal was then separated into body and gravity acceleration signals (tBodyAcc-XYZ and tGravityAcc-XYZ) using another low pass Butterworth filter with a corner frequency of 0.3 Hz. 

Subsequently, the body linear acceleration and angular velocity were derived in time to obtain Jerk signals (tBodyAccJerk-XYZ and tBodyGyroJerk-XYZ). Also the magnitude of these three-dimensional signals were calculated using the Euclidean norm (tBodyAccMag, tGravityAccMag, tBodyAccJerkMag, tBodyGyroMag, tBodyGyroJerkMag). 

Finally a Fast Fourier Transform (FFT) was applied to some of these signals producing fBodyAcc-XYZ, fBodyAccJerk-XYZ, fBodyGyro-XYZ, fBodyAccJerkMag, fBodyGyroMag, fBodyGyroJerkMag. (Note the 'f' to indicate frequency domain signals). 

These signals were used to estimate variables of the feature vector for each pattern:  
'-XYZ' is used to denote 3-axial signals in the X, Y and Z directions.

* tBodyAcc-XYZ
* tGravityAcc-XYZ
* tBodyAccJerk-XYZ
* tBodyGyro-XYZ
* tBodyGyroJerk-XYZ
* tBodyAccMag
* tGravityAccMag
* tBodyAccJerkMag
* tBodyGyroMag
* tBodyGyroJerkMag
* fBodyAcc-XYZ
* fBodyAccJerk-XYZ
* fBodyGyro-XYZ
* fBodyAccMag
* fBodyAccJerkMag
* fBodyGyroMag
* fBodyGyroJerkMag

The set of variables that were estimated from these signals are: 

* mean(): Mean value
* std(): Standard deviation
* mad(): Median absolute deviation 
* max(): Largest value in array
* min(): Smallest value in array
* sma(): Signal magnitude area
* energy(): Energy measure. Sum of the squares divided by the number of values. 
* iqr(): Interquartile range 
* entropy(): Signal entropy
* arCoeff(): Autorregresion coefficients with Burg order equal to 4
* correlation(): correlation coefficient between two signals
* maxInds(): index of the frequency component with largest magnitude
* meanFreq(): Weighted average of the frequency components to obtain a mean frequency
* skewness(): skewness of the frequency domain signal 
* kurtosis(): kurtosis of the frequency domain signal 
* bandsEnergy(): Energy of a frequency interval within the 64 bins of the FFT of each window.
angle(): Angle between to vectors.

Additional vectors obtained by averaging the signals in a signal window sample. These are used on the angle() variable:

* gravityMean
* tBodyAccMean
* tBodyAccJerkMean
* tBodyGyroMean
* tBodyGyroJerkMean